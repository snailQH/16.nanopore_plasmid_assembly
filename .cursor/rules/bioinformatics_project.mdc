---
alwaysApply: true
---

# Bioinformatics Project Framework Rules

## COMPLIANCE CONFIRMED

**I will follow the bioinformatics project framework. Every project should start with a clear understanding of data, software, databases, and analysis workflow.**

## Core Principle: Resource-First Approach

Before starting any bioinformatics project analysis, you MUST:

1. **Identify and document all raw data**
2. **List all required software tools**
3. **Identify all reference databases**
4. **Define the analysis workflow**
5. **Create a comprehensive resources inventory document**

Only after these are clearly documented should you proceed with script development and analysis execution.

---

## 1. Raw Data Documentation

### 1.1 Data Inventory Requirements

For each data type, document:

- **Data Type**: What type of sequencing/data (e.g., small RNA-seq, miRNA-seq, single-end reads)
- **Purpose**: What analysis step uses this data
- **Location**: Full path to data directory
- **File Format**: Expected file formats (FASTQ.gz, FASTQ)
- **File Naming Pattern**: How files are named (e.g., `*_R1.fastq.gz`, `SAMPLE_ID_R1.fastq.gz`)
- **Expected Files**: List of expected files or file patterns
- **File Sizes**: Typical or actual file sizes
- **Quality Requirements**: Any quality thresholds or requirements
- **Preprocessing**: Any preprocessing steps required (e.g., adapter trimming, length filtering)

### 1.2 Data Organization

- **Input Data**: Store in dedicated input directory (e.g., `01.rawdata/`, never modify)
- **Output Data**: Store in separate output directory (e.g., `results/`)
- **Naming Convention**: Use consistent naming patterns (`SAMPLE_ID_R1.fastq.gz`)
- **Path Management**: Use configuration variables for paths

### 1.3 Data Validation

Before analysis:
- Verify all expected files exist
- Check file sizes are reasonable
- Validate file formats
- Document any missing or problematic data

---

## 2. Software Tools Documentation

### 2.1 Software Inventory Requirements

For each software tool, document:

- **Tool Name**: Official name
- **Purpose**: What the tool does
- **Version**: Installed version
- **Installation Status**: ✓ Installed, ✗ Not installed, ⚠️ Needs update
- **Installation Path**: Full path to executable
- **Installation Method**: How it was installed (conda, system, manual)
- **Used in Steps**: Which analysis steps use this tool
- **Command Template**: Example command with key parameters
- **Dependencies**: Required dependencies or libraries
- **Resource Requirements**: CPU, memory, storage requirements

### 2.2 Software Categories

Organize software by function:

- **Quality Control**: cutadapt, fastp, FastQC, MultiQC
- **Mapping**: Bowtie1, mapper.pl (miRDeep2)
- **Quantification**: quantifier.pl (miRDeep2)
- **Novel Discovery**: miRDeep2.pl
- **Differential Expression**: DESeq2, edgeR, limma-voom
- **Target Prediction**: miRanda, TargetScan, RNAhybrid
- **Functional Analysis**: clusterProfiler, GO, KEGG
- **Utilities**: samtools, awk, grep, sed, python3, R

### 2.3 Software Installation

- **Primary Method**: Use conda/bioconda when possible
- **Environment Management**: Use conda environments
- **Version Control**: Document versions in resources inventory
- **Installation Scripts**: Create automated installation scripts
- **Verification**: Verify installation before use

---

## 3. Reference Databases Documentation

### 3.1 Database Inventory Requirements

For each database, document:

- **Database Name**: Official name
- **Purpose**: What analysis uses this database
- **Version/Release**: Database version or release date
- **Source**: Where to download (URL, FTP, etc.)
- **Download Date**: When it was downloaded
- **Location**: Full path to database files
- **File Size**: Compressed and uncompressed sizes
- **Format**: Database format (FASTA, GFF3, etc.)
- **Status**: ✓ Downloaded, ⚙️ Downloading, ✗ Not downloaded
- **Used in Steps**: Which analysis steps use this database
- **Update Frequency**: How often database is updated
- **Configuration**: How database paths are configured

### 3.2 Database Categories

Organize databases by type:

- **miRNA Databases**: miRBase (hairpin.fa, mature.fa, GFF3 files)
- **Reference Genomes**: hg38 (human), mm39 (mouse), SF9 genome
- **Genome Annotations**: GTF/GFF3 files for reference genomes
- **Functional Databases**: GO, KEGG, Reactome
- **Target Prediction Databases**: TargetScan, miRanda databases
- **Repeat Databases**: Rfam (for miRDeep2)

### 3.3 Database Management

- **Centralized Storage**: Store all databases in dedicated directory (e.g., `/data4/liqh/microRNA-analysis-dev-1.0/mirbase`)
- **Path Configuration**: Use configuration files for database paths
- **Version Tracking**: Document database versions and download dates
- **Update Strategy**: Plan for database updates
- **Storage Planning**: Account for database storage requirements

---

## 4. Analysis Workflow Documentation

### 4.1 Workflow Definition

Document the complete analysis workflow:

- **Step-by-Step Process**: Sequential analysis steps
  1. Quality Control (cutadapt)
  2. Mapping (mapper.pl)
  3. Quantification (quantifier.pl)
  4. Novel Discovery (miRDeep2.pl, optional)
  5. Merge Results (Python scripts)
  6. Statistics Collection (Python scripts)
- **Input/Output**: What goes in and comes out of each step
- **Dependencies**: Which steps depend on previous steps
- **Decision Points**: Where choices are made (e.g., which species, adapter sequence)
- **Quality Checkpoints**: Where quality is assessed
- **Alternative Methods**: Alternative approaches if primary fails

### 4.2 Workflow Integration

- **Data Flow**: How data flows through the pipeline
- **Software Usage**: Which tools are used at each step
- **Database Usage**: Which databases are used at each step
- **Output Management**: How outputs are organized

---

## 5. Project Resources Inventory Document

### 5.1 Document Structure

Create a comprehensive `PROJECT_RESOURCES.md` document in `docs/` directory with:

1. **Raw Data Section**
   - Complete inventory of all input data
   - File locations, formats, sizes
   - Usage in analysis steps

2. **Software Tools Section**
   - Complete inventory of all software
   - Installation status, versions, paths
   - Usage in analysis steps

3. **Reference Databases Section**
   - Complete inventory of all databases
   - Sources, versions, locations
   - Usage in analysis steps

4. **Configuration Files Section**
   - All configuration files
   - Key parameters and variables

5. **Output Files Section**
   - Expected outputs from each step
   - File formats and locations

### 5.2 Document Maintenance

- **Update Regularly**: Keep document current as project evolves
- **Version Control**: Track changes to resources
- **Reference in Scripts**: Scripts should reference this document
- **Share with Team**: Make accessible to all project members

---

## 6. Project Initialization Checklist

Before starting any bioinformatics project, complete:

### Phase 1: Data Assessment
- [ ] Identify all raw data types
- [ ] Document data locations and formats
- [ ] Verify data integrity
- [ ] Estimate data sizes
- [ ] Document data quality requirements

### Phase 2: Software Planning
- [ ] List all required software tools
- [ ] Check software availability
- [ ] Plan installation method (conda, system, manual)
- [ ] Document version requirements
- [ ] Create installation scripts

### Phase 3: Database Planning
- [ ] Identify all required databases
- [ ] Find database sources and download links
- [ ] Estimate storage requirements
- [ ] Plan download and configuration
- [ ] Create database setup scripts

### Phase 4: Workflow Design
- [ ] Define analysis workflow
- [ ] Map data flow through pipeline
- [ ] Identify software usage at each step
- [ ] Identify database usage at each step
- [ ] Plan quality checkpoints

### Phase 5: Documentation
- [ ] Create PROJECT_RESOURCES.md document
- [ ] Document all data, software, and databases
- [ ] Create installation and setup scripts
- [ ] Document workflow and methodology

### Phase 6: Implementation
- [ ] Install and configure software
- [ ] Download and configure databases
- [ ] Create analysis scripts
- [ ] Test pipeline on small dataset
- [ ] Execute full pipeline

---

## 7. Best Practices

### 7.1 Resource Management

- **Centralized Configuration**: Use configuration files for all paths
- **Environment Isolation**: Use conda environments
- **Version Control**: Track software and database versions
- **Documentation**: Document everything in PROJECT_RESOURCES.md

### 7.2 Reproducibility

- **Version Pinning**: Document exact versions used
- **Database Versions**: Record database release dates/versions
- **Parameter Documentation**: Document all key parameters
- **Script Versioning**: Version control all scripts

### 7.3 Efficiency

- **File Existence Checks**: Always check if outputs exist before processing
- **Parallel Processing**: Use appropriate thread counts
- **Resource Monitoring**: Monitor CPU, memory, and storage usage
- **Error Handling**: Handle errors gracefully

---

## 8. Integration with Other Rules

This framework **integrates** with:
- `code_reuse.mdc` - Code reuse requirements
- `pipeline_execution.mdc` - Execution patterns
- `execution_workflow.mdc` - Technical workflow
- `project_organization.mdc` - File organization

**All rules work together** to ensure comprehensive, reproducible, and well-documented bioinformatics projects.

---

## 9. Template: PROJECT_RESOURCES.md Structure

When creating a new project's resources inventory, use this structure:

```markdown
# Project Resources Inventory
## Complete Documentation of Data, Software, and Databases

**Project**: miRNA Quantification Pipeline
**Last Updated**: [Date]
**Purpose**: Small RNA sequencing analysis, miRNA quantification, and novel miRNA discovery

## 1. Raw Data
[Document all input data]

## 2. Software Tools
[Document all software]

## 3. Reference Databases
[Document all databases]

## 4. Configuration Files
[Document configuration]

## 5. Output Files
[Document expected outputs]

## 6. Resource Requirements
[Storage, CPU, memory, runtime]

## 7. Maintenance and Updates
[How to update software and databases]
```

---

**Remember**: A well-documented project with clear resource inventory is the foundation of reproducible bioinformatics research. Always start with resources, then build the analysis workflow.
